# SPDX-FileCopyrightText: 2025 LichtFeld Studio Authors
# SPDX-License-Identifier: GPL-3.0-or-later

[plugin]
name = "densification"
version = "1.0.0"
description = "Dense point cloud initialization using RoMa v2 matching"
author = "LichtFeld"
min_lichtfeld_version = "1.0.0"

# -----------------------------------------------------------------------------
# Dependencies
# -----------------------------------------------------------------------------
[dependencies]
packages = [
    "torch",
    "torchvision",
    "numpy==2.4.1",
    "pycolmap",
    "Pillow",
    "scipy",
    "tqdm",
    "einops>=0.8.1",
    "rich>=14.2.0"
]

# -----------------------------------------------------------------------------
# uv index configuration
# -----------------------------------------------------------------------------

# PyTorch CUDA 12.8 index
[[tool.uv.index]]
name = "pytorch-cu128"
url = "https://download.pytorch.org/whl/cu128"
explicit = true

# -----------------------------------------------------------------------------
# Per-package index pinning
# -----------------------------------------------------------------------------
[tool.uv.sources]
torch = [
    { index = "pytorch-cu128", marker = "sys_platform == 'linux' or sys_platform == 'win32'" },
]
torchvision = [
    { index = "pytorch-cu128", marker = "sys_platform == 'linux' or sys_platform == 'win32'" },
]

# -----------------------------------------------------------------------------
# Local packages bundled with the plugin
# -----------------------------------------------------------------------------
local_packages = [
    "RoMaV2"
]

# -----------------------------------------------------------------------------
# Plugin lifecycle
# -----------------------------------------------------------------------------
[lifecycle]
auto_start = true
hot_reload = true
